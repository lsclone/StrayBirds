---
layout: post
title: C++11使用总结
category: 技术
---

C++11相关应用总结：

* 一、 C++11原子操作<atomic>

*示例代码*：

```
// atomic::compare_exchange_weak example:
#include <iostream>       // std::cout
#include <atomic>         // std::atomic
#include <thread>         // std::thread
#include <vector>         // std::vector
// a simple global linked list:
struct Node { int value; Node* next; };
std::atomic<Node*> list_head (nullptr);
void append (int val) {     // append an element to the list
  Node* newNode = new Node {val,list_head};
  // next is the same as: list_head = newNode, but in a thread-safe way:
  while (!list_head.compare_exchange_weak(newNode->next,newNode)) {}
  // (with newNode->next updated accordingly if some other thread just appended another node)
}
int main ()
{
  // spawn 10 threads to fill the linked list:
  std::vector<std::thread> threads;
  for (int i=0; i<10; ++i) threads.push_back(std::thread(append,i));
  for (auto& th : threads) th.join();
  // print contents:
  for (Node* it = list_head; it!=nullptr; it=it->next)
    std::cout << ' ' << it->value;
  std::cout << '\n';
  // cleanup:
  Node* it; while (it=list_head) {list_head=it->next; delete it;}
  return 0;
}
```

*参考文档*：

1. [msdn社区<atomic>介绍](https://msdn.microsoft.com/zh-cn/library/hh874894.aspx "atomic")
2. [<atomic> 类型详解二 std::atomic](http://www.cnblogs.com/haippy/archive/2013/09/05/3301408.html "atomic")
3. [C++11中的原子操作（atomic operation）](http://blog.csdn.net/yockie/article/details/8838686 "atomic")
4. [C++并发实战16: std::atomic原子操作](http://blog.csdn.net/liuxuejiang158blog/article/details/17413149 "atomic")

* 二、 C++11多线程<thread>

*参考文档*：

1. [C++11 多线程初探](http://www.cnblogs.com/haippy/p/3235560.html "thread")
2. [C++11 multithreading tutorial](https://solarianprogrammer.com/2011/12/16/cpp-11-thread-tutorial/ "thread")
3. [C++官网：multithreading相关类介绍](http://www.cplusplus.com/reference/multithreading/ "thread")
4. [C++11 run templated class function with std::thread](http://stackoverflow.com/questions/21485578/c11-run-templated-class-function-with-stdthread "thread")
5. [C++ std::thread of a member function](http://stackoverflow.com/questions/18383600/c-stdthread-of-a-member-function "thread")

* 三、 C++11智能指针<shared_ptr>

*参考文档*：

1. [C++11中的智能指针](http://www.jellythink.com/archives/684 "")

============================================================================

*参考文档*：

* [主流编译器对C++11的支持情况](http://cpp1x.org/compiler-support.html "markdown")
* [Visual C++ 中的 C++11/14/17 功能](https://msdn.microsoft.com/zh-cn/library/hh567368.aspx "markdown")
