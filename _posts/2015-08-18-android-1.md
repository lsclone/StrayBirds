---
layout: post
title: Android加载图片小结
category: 技术
---

##### 具体实现：

**1. 加载资源图片**

把PNG图片拖到工程中res中的drawable-hdpi中; （JPG需要转换格式到PNG）

```
InputStream is = getResources().openRawResource(R.drawable.pic_name); //图片名为pic_name.png
Bitmap bitmap = BitmapFactory.decodeStream(is);
ImageView.setImageBitmap(bitmap);
```

**2. 加载系统图库图片**

*参考网址*： [Android 如何从系统图库中选择图片](http://www.oschina.net/question/157182_53236 "Markdown")

```
@Override
public void onClick(View view) {
		Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
		intent.setType("image/*");
		intent.putExtra("crop", true);
		intent.putExtra("return-data", true);
		startActivityForResult(intent, RESULT_LOAD_IMAGE);
}
...
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {

        Uri pic = data.getData();
        Log.d("onActivityResult", "chosen pic: " + pic.getPath());

        InputStream input = null;
      	try {
      		input = this.getActivity().getContentResolver().openInputStream(pic);
      	} catch (FileNotFoundException e) {
      		e.printStackTrace();
      	}

      	if(input != null) {
      		imageView.setImageBitmap(BitmapFactory.decodeStream(input));
      		imageView.setScaleType(ImageView.ScaleType.FIT_XY);
      	}
    }
}

```

**3. bitmap转YUV**

*参考网址*：[android bitmap转YUV](http://xiaxveliang.blog.163.com/blog/static/2970803420141122290438/ "Markdown")

**4. bitmap图片翻转(镜像)**

垂直对称(y轴对称)：

```
Matrix matrix = new Matrix();
float matrixValues[] = {-1f, 0f, 0f, 0f, 1f, 0f, 0f, 0f, 1f};
matrix.setValues(matrixValues);
//matrix.postTranslate(image.width, 0); //表示将图片左右倒置
matrix.postTranslate(width*2, 0);
canvas.drawBitmap(bitmap, matrix, paint);
```

*参考网址*：[Android图片旋转,缩放,位移,倾斜,对称完整示例(二)——Bitmap.createBitmap()和Matrix](http://www.tuicool.com/articles/BJB7Jr "Markdown")

**5. bitmap图片缩放**

```
Matrix matrix = new Matrix();
matrix.postScale(float sx, float sy);
canvas.drawBitmap(bitmap, matrix, paint);
```

**6. argb数据生成Bitmap**

```
Bitmap bitmap = Bitmap.createBitmap(bytes, width, height, Config.ARGB_8888);
```

**7. 加载YUV Image**

````
ByteArrayOutputStream out = new ByteArrayOutputStream();
YuvImage yuvImage = new YuvImage(data, ImageFormat.NV21, width, height, null);
yuvImage.compressToJpeg(new Rect(0, 0, width, height), 50, out);
byte[] imageBytes = out.toByteArray();
Bitmap image = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);
imageview.setImageBitmap(image);
````

*参考网址*：[Displaying YUV Image in Android](http://stackoverflow.com/questions/9192982/displaying-yuv-image-in-android "Markdown")

====================================================================

**相关网址：**

1. [android使用ImageView加载本地SdCard图片和加载网络图片](http://longshuai2007.blog.163.com/blog/static/1420944142011611105732712/ "Markdown")

2. [安卓开发-加载图片](http://blog.csdn.net/imzoer/article/details/9420537 "Markdown")

3. [怎样在android中添加背景图片](http://jingyan.baidu.com/article/27fa7326db6bbd46f8271fae.html "Markdown")
