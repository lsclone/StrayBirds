---
layout: post
title: Android开发随笔
category: 技术
---

**Android系统课程：** 

* [Android开发教程](http://www.yiibai.com/android/ "Markdown")
* [Android学习之路](http://www.stormzhang.com/android/2014/07/07/learn-android-from-rookie/ "Markdown")
* [Android API Guides(中文)](http://wiki.eoeandroid.com/Android_API_Guides "Markdown")

#### 1. Android手机开发 > PC可以先安装**豌豆荚**，再连接手机。

#### 2. eclipse设置禁用IPv6

eclipse -> Window -> Preferences -> JAVA -> Installed JREs -> 选中JDK--EDIT

Deault VM Arguments:-Djava.net.preferIPv4Stack=true

![eclipse设置禁用IPv6](http://dl.iteye.com/upload/attachment/0080/5852/b3d29852-1caf-3aca-bbdb-b8032a5c7743.png "Markdown")

#### 3. 按钮Button触发实现

```
Button Btn1 = (Button)findViewById(R.id.button1);//获取按钮资源    
Btn1.setOnClickListener(new Button.OnClickListener(){//创建监听    
    public void onClick(View v) {    
        String strTmp = "点击Button01";    
        Ev1.setText(strTmp);    
    }    

});
```

#### 4. 图片Image缩放

```
ImageView imv = (ImageView) findViewById(R.id.imageView1);

//取得屏幕的显示大小
Display currentDisplay = getWindowManager().getDefaultDisplay();
int dw = currentDisplay.getWidth();
int dh = currentDisplay.getHeight();

//对拍出的照片进行缩放
BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
bmpFactoryOptions.inJustDecodeBounds = true;
Bitmap bmp = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory()
                      .getAbsolutePath() + "/mypicture.jpg", bmpFactoryOptions);

int heightRatio = (int) Math.ceil(bmpFactoryOptions.outHeight / (float) dh);
int widthRatio = (int) Math.ceil(bmpFactoryOptions.outWidth / (float) dw);

if (heightRatio > 1 && widthRatio > 1) {
    if (heightRatio > widthRatio) {
        bmpFactoryOptions.inSampleSize = heightRatio;
    } else {
        bmpFactoryOptions.inSampleSize = widthRatio;
    }
}

bmpFactoryOptions.inJustDecodeBounds = false;
bmp = BitmapFactory.decodeFile(imageFilePath, bmpFactoryOptions);

imv.setImageBitmap(bmp);
```

#### 5. 控件显示/隐藏设置：

```
  // This view is invisible, and it doesn't take any space for layout purposes.
  View.setVisibility(View.GONE);
  
  // This view is invisible, but it still takes up space for layout purposes.
  View.setVisibility(View.INVISIBLE);
  
  // This view is visible.
  View.setVisibility(View.VISIBLE);
```

#### 6. View绘制流程

**循环调用onDraw**

```
public View(Context context, AttributeSet attrs) {
  ...
  setWillNotDraw(false); // call onDraw
  ...
}
```

```
@Override
protected void onDraw(Canvas canvas) {
  ...
  invalidate(); // call onDraw again
}
```

详细参考： 

[Android中View绘制流程以及invalidate()等相关方法分析](http://blog.csdn.net/qinjuning/article/details/7110211 "Markdown")

[onDraw(Canvas canvas)相关用法](http://blog.csdn.net/loongggdroid/article/details/17956841 "Markdown")

#### 7. Java List<自定义类型>

```
List<Rect> list = new ArrayList<Rect>();
...
list.addAll(tmpList);
...
for (int i = 0; i < list.size(); i++) {
    list.get(i);
}
```

#### 8. 设置View半透明

打开xml -> View Properties -> Alpha (0 ~ 1)之间, 例如: 设置0.5

#### 9. JAVA简单实例(Android无关)

HelloJNI.java

``` 
public class HelloJNI {
    // Test Driver
    public static void main(String[] args) {
        System.out.println("hello!");
    }
}
```

```
// HelloJNI.java -> HelloJNI.class (JVM虚拟机可识别的字节码)
$ javac HelloJNI.java

// run HelloJNI.class on JVM
$java HelloJNI
```

#### 10. byte[]初始化

```
public class TestArray {
    public static void main(String[] args) {
    
        //byte[] byteArr = { 12, -127, -128, 127 };
        //byte[] byteArr = { (byte)0x3c, (byte)0x00, (byte)0xd0, (byte)0xff };
        byte[] byteArr = new byte[8];
        Arrays.fill(byteArr, (byte)0xff); // 0x00
        
        for (int i = 0; i < byteArr.length; i++) {
            System.out.printf("%d ", byteArr[i]);
        }
        System.out.printf("\n");
    }
}
```

#### 11. Android 的Margin和Padding属性——消除Layout白边方法

Padding为内边框，Margin为外边框。对应的属性为：

    android:layout_marginBottom="25dip" 
    android:layout_marginLeft="10dip" 
    android:layout_marginTop="10dip" 
    android:layout_marginRight="10dip" 
    android:paddingLeft="1dip" 
    android:paddingTop="1dip" 
    android:paddingRight="1dip" 
    android:paddingBottom="1dip"
    
如果左右上下都是相同的设置则可以直接设置：

    android:layout_margin="10dip" 
    android:padding="5dip"

消除Layout白边：

> 例: RelativeLayout -> Properties -> View
> > Padding Left : -8dp

> > Padding Top : -8dp

> > Padding Right : -8dp

> > Padding Bottom : -8dp

#### 12. 调试(打印信息)

> 例如 调试 JNI c/c++ 函数
> > dalvikvm: /data/app-lib/com.test/libhello.so (::func(...))

======================================================================

**相关网址：**

1. [Android官网帮助文档](http://developer.android.com/reference/packages.html "Markdown")

2. [Android 利用OnDraw实现自定义View](http://blog.csdn.net/bigconvience/article/details/25187907 "Markdown")

3. [Android ADB使用之详细篇](http://www.jizhuomi.com/android/environment/191.html "Markdown")

4. [Android SDK Manager国内无法更新的解决方案](http://www.linuxidc.com/Linux/2015-01/111958.htm "Markdown")
